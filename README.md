ADaM Dataset Generator Shiny AppOverviewThis R Shiny application serves as a processing engine that complements the CDISC SDTM to ADaM Mapping Tool. It takes a YAML specification file generated by the mapping tool and a set of corresponding SDTM source datasets to automatically produce the specified ADaM datasets.The core of this application is its ability to interpret the derivation logic written in the YAML file, apply it to the source data, and generate analysis-ready datasets for download.How to Use the ApplicationFollow these steps to generate your ADaM datasets:1. Prepare Your FilesSpecification File (.yaml or .yml):Use the CDISC Drawing Board tool to visually map your SDTM to ADaM datasets.For each ADaM column that requires derivation, click on it to open the derivation modal.In the Derivation Logic text area, you must enter valid R code. This code will be executed within a dplyr::mutate() context.Export the final specification using the "View Spec (YAML)" button.Source Data Files (.csv or .xpt):Gather all the SDTM domains that you used as sources in your specification.Ensure they are saved in either CSV (.csv) or SAS Transport (.xpt) format.The file names should correspond to the domain names (e.g., dm.csv, ae.xpt). The app is not case-sensitive.2. Launch the Shiny AppEnsure you have R and RStudio installed.Install all the required packages by running this command in your R console:install.packages(c("shiny", "shinythemes", "yaml", "dplyr", "purrr", "haven", "readr", "DT", "rlang", "tools"))
Place the ui.R and server.R files in the same directory.Open either ui.R or server.R in RStudio and click the "Run App" button.3. Using the InterfaceUpload Specification: Click the first "Browse..." button and select the YAML file you prepared.Upload Source Data: Click the second "Browse..." button and select all the SDTM .csv or .xpt files required by your specification. You can select multiple files at once.Generate Datasets: Once all files are uploaded, click the large "Generate ADaM Datasets" button.Review and Download:The app will automatically switch to the "Generated ADaM Datasets" tab.For each dataset created, you will see its name, a preview of the first few rows, and buttons to download the full dataset as either a CSV or XPT file.If you encounter any issues, check the "Processing Log" tab for detailed status messages and error reports.A Note on Derivation LogicThe power of this tool lies in the logic field in your YAML file. The app will perform the following steps for each ADaM dataset it generates:Identify Sources: It finds all unique SDTM domains required for the derivations.Merge Data: It performs a left_join on all source datasets, using STUDYID and USUBJID as the join keys. This creates a single, wide data frame to work from.Apply Derivations: It iterates through your ADaM columns and executes the R code from the logic field using dplyr::mutate(). This means you can write standard dplyr code.Example logic in YAML:# ...
columns:
  - name: ADY
    derivation:
      description: Analysis Day
      logic: 'as.integer(as.Date(ASTDT) - as.Date(TRTSDT)) + 1'
      sources:
        - AE.ASTDT
        - ADSL.TRTSDT
  - name: AGECAT1
    derivation:
      description: Age Category
      logic: "case_when(AGE < 18 ~ '<18', AGE >= 18 & AGE < 65 ~ '18-64', AGE >= 65 ~ '>=65', TRUE ~ NA_character_)"
      sources:
        - ADSL.AGE
# ...
